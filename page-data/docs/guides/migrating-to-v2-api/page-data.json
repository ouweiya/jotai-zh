{"componentChunkName":"component---src-pages-docs-mdx-slug-js","path":"/docs/guides/migrating-to-v2-api","result":{"data":{"mdx":{"slug":"guides/migrating-to-v2-api","frontmatter":{"title":"迁移到v2 API","description":"New \"Async\" API"},"body":"const _excluded = [\"components\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nconst _frontmatter = {\n  \"title\": \"迁移到v2 API\",\n  \"description\": \"New \\\"Async\\\" API\",\n  \"nav\": 7\n};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  let {\n      components\n    } = _ref,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"\\u53C2\\u8003\\uFF1A \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/pmndrs/jotai/discussions/1514\"\n  }, \"https://github.com/pmndrs/jotai/discussions/1514\")), mdx(\"p\", null, \"Jotai v1 \\u57282022\\u5E746\\u6708\\u53D1\\u5E03\\uFF0C\\u6536\\u5230\\u4E86\\u5404\\u79CD\\u53CD\\u9988\\u3002\\nReact\\u4E5F\\u63D0\\u51FA\\u4E86\\u5BF9promise\\u7684\\u4E00\\u6D41\\u652F\\u6301\\u3002\\nJotai v2 \\u5C06\\u6709\\u4E00\\u4E2A\\u65B0\\u7684API\\u3002\"), mdx(\"p\", null, \"\\u4E0D\\u5E78\\u7684\\u662F\\uFF0C\\u65B0\\u529F\\u80FD\\u4F34\\u968F\\u7740\\u4E00\\u4E9B\\u7834\\u574F\\u6027\\u7684\\u53D8\\u5316\\u3002\"), mdx(\"h3\", null, \"\\u65B0\\u529F\\u80FD\\u662F\\u4EC0\\u4E48 {#what-are-new-features}\"), mdx(\"h4\", null, \"Vanilla\\u5E93 {#vanilla-library}\"), mdx(\"p\", null, \"Jotai\\u5E26\\u6709vanilla\\uFF08\\u975EReact\\uFF09\\u51FD\\u6570\\n\\u548CReact\\u51FD\\u6570\\u5206\\u5F00\\u3002\\n\\u5B83\\u4EEC\\u4ECE\\u50CF\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"jotai/vanilla\"), \"\\u8FD9\\u6837\\u7684\\u5907\\u7528\\u5165\\u53E3\\u70B9\\u63D0\\u4F9B\\u3002\"), mdx(\"h4\", null, \"Store API {#store-api}\"), mdx(\"p\", null, \"Jotai\\u516C\\u5F00\\u4E86store\\u63A5\\u53E3\\uFF0C\\u4EE5\\u4FBF\\u60A8\\u53EF\\u4EE5\\u76F4\\u63A5\\u64CD\\u4F5C\\u539F\\u5B50\\u503C\\u3002\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"import { createStore } from 'jotai' // \\u6216\\u8005\\u4ECE 'jotai/vanilla'\\n\\nconst store = createStore()\\nstore.set(fooAtom, 'foo')\\n\\nconsole.log(store.get(fooAtom)) // \\u6253\\u5370 \\\"foo\\\"\\n\\nconst unsub = store.sub(fooAtom, () => {\\n  console.log('fooAtom \\u5728 store \\u4E2D\\u7684\\u503C\\u5DF2\\u7ECF\\u6539\\u53D8')\\n})\\n// \\u8C03\\u7528 unsub() \\u6765\\u53D6\\u6D88\\u8BA2\\u9605\\u3002\\n\")), mdx(\"p\", null, \"\\u60A8\\u4E5F\\u53EF\\u4EE5\\u521B\\u5EFA\\u81EA\\u5DF1\\u7684React Context\\u6765\\u4F20\\u9012\\u4E00\\u4E2Astore\\u3002\"), mdx(\"h4\", null, \"\\u66F4\\u7075\\u6D3B\\u7684\\u539F\\u5B50 \", mdx(\"inlineCode\", {\n    parentName: \"h4\"\n  }, \"write\"), \" \\u51FD\\u6570 {#more-flexible-atom-\", mdx(\"inlineCode\", {\n    parentName: \"h4\"\n  }, \"write\"), \"-function}\"), mdx(\"p\", null, \"write\\u51FD\\u6570\\u53EF\\u4EE5\\u63A5\\u53D7\\u591A\\u4E2A\\u53C2\\u6570\\uFF0C\\n\\u5E76\\u8FD4\\u56DE\\u4E00\\u4E2A\\u503C\\u3002\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"atom(\\n  (get) => get(...),\\n  (get, set, arg1, arg2, ...) => {\\n    ...\\n    return someValue\\n  }\\n)\\n\")), mdx(\"h3\", null, \"\\u4EC0\\u4E48\\u662F\\u7834\\u574F\\u6027\\u7684 {#what-are-breaking}\"), mdx(\"h4\", null, \"\\u5F02\\u6B65\\u539F\\u5B50\\u4E0D\\u518D\\u7279\\u6B8A {#async-atoms-are-no-longer-special}\"), mdx(\"p\", null, \"\\u5F02\\u6B65\\u539F\\u5B50\\u53EA\\u662F\\u5E26\\u6709promise\\u503C\\u7684\\u666E\\u901A\\u539F\\u5B50\\u3002\\n\\u539F\\u5B50\\u7684getter\\u51FD\\u6570\\u4E0D\\u89E3\\u6790promises\\u3002\\n\\u53E6\\u4E00\\u65B9\\u9762\\uFF0C\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useAtom\"), \"\\u94A9\\u5B50\\u7EE7\\u7EED\\u89E3\\u6790promises\\u3002\"), mdx(\"p\", null, \"\\u50CF\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"splitAtom\"), \"\\u8FD9\\u6837\\u7684\\u4E00\\u4E9B\\u5DE5\\u5177\\u671F\\u671B\\u540C\\u6B65\\u539F\\u5B50\\uFF0C\\n\\u5E76\\u4E14\\u4E0D\\u4F1A\\u4E0E\\u5F02\\u6B65\\u539F\\u5B50\\u4E00\\u8D77\\u5DE5\\u4F5C\\u3002\"), mdx(\"h4\", null, \"\\u53EF\\u5199\\u539F\\u5B50\\u7C7B\\u578B\\u5DF2\\u66F4\\u6539\\uFF08\\u4EC5\\u9650TypeScript\\uFF09 {#writable-atom-type-is-changed-(typescript-only)}\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-ts\"\n  }, \"// \\u65E7\\u7684\\nWritableAtom<Value, Arg, Result extends void | Promise<void>>\\n\\n// \\u65B0\\u7684\\nWritableAtom<Value, Args extends unknown[], Result>\\n\")), mdx(\"p\", null, \"\\u4E00\\u822C\\u6765\\u8BF4\\uFF0C\\u6211\\u4EEC\\u5E94\\u8BE5\\u907F\\u514D\\u76F4\\u63A5\\u4F7F\\u7528\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"WritableAtom\"), \"\\u7C7B\\u578B\\u3002\"), mdx(\"h4\", null, \"\\u4E00\\u4E9B\\u51FD\\u6570\\u88AB\\u5220\\u9664 {#some-functions-are-dropped}\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Provider\\u7684\", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"initialValues\"), \"\\u5C5E\\u6027\\u88AB\\u5220\\u9664\\uFF0C\\u56E0\\u4E3A\", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"store\"), \"\\u66F4\\u7075\\u6D3B\\u3002\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Provider\\u7684scope\\u5C5E\\u6027\\u88AB\\u5220\\u9664\\uFF0C\\u56E0\\u4E3A\\u4F60\\u53EF\\u4EE5\\u521B\\u5EFA\\u81EA\\u5DF1\\u7684context\\u3002\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"abortableAtom\"), \"\\u5DE5\\u5177\\u88AB\\u5220\\u9664\\uFF0C\\u56E0\\u4E3A\\u8BE5\\u529F\\u80FD\\u9ED8\\u8BA4\\u5305\\u542B\\u5728\\u5185\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"waitForAll\"), \"\\u5DE5\\u5177\\u88AB\\u5220\\u9664\\uFF0C\\u56E0\\u4E3A\", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Promise.all\"), \"\\u5C31\\u53EF\\u4EE5\\u5DE5\\u4F5C\")), mdx(\"h3\", null, \"\\u8FC1\\u79FB\\u6307\\u5357 {#migration-guides}\"), mdx(\"h4\", null, \"\\u5F02\\u6B65\\u539F\\u5B50 {#async-atoms}\"), mdx(\"p\", null, \"\\u5F02\\u6B65\\u539F\\u5B50\\u7684\\u8BFB\\u51FD\\u6570\\u7684\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"get\"), \"\\u51FD\\u6570\\n\\u4E0D\\u89E3\\u6790promises\\uFF0C\\u6240\\u4EE5\\u4F60\\u5FC5\\u987B\\u653E\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"await\"), \"\\u6216\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".then()\"), \"\\u3002\"), mdx(\"p\", null, \"\\u7B80\\u5355\\u6765\\u8BF4\\uFF0C\\u6539\\u53D8\\u5C31\\u50CF\\u4E0B\\u9762\\u8FD9\\u6837\\u3002\\n\\uFF08\\u5982\\u679C\\u4F60\\u662FTypeScript\\u7528\\u6237\\uFF0C\\u7C7B\\u578B\\u4F1A\\u544A\\u8BC9\\u4F60\\u5728\\u54EA\\u91CC\\u6539\\u53D8\\u3002\\uFF09\"), mdx(\"h5\", null, \"\\u4E4B\\u524D\\u7684API {#previous-api}\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"const asyncAtom = atom(async () => 'hello')\\nconst derivedAtom = atom((get) => get(asyncAtom).toUppercase())\\n\")), mdx(\"h5\", null, \"\\u65B0\\u7684API {#new-api}\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"const asyncAtom = atom(async () => 'hello')\\nconst derivedAtom = atom(async (get) => (await get(asyncAtom)).toUppercase())\\n// \\u6216\\u8005\\nconst derivedAtom = atom((get) => get(asyncAtom).then((x) => x.toUppercase()))\\n\")), mdx(\"h4\", null, \"Provider\\u7684\", mdx(\"inlineCode\", {\n    parentName: \"h4\"\n  }, \"initialValues\"), \"\\u5C5E\\u6027 {#provider's-\", mdx(\"inlineCode\", {\n    parentName: \"h4\"\n  }, \"initialvalues\"), \"-prop}\"), mdx(\"h5\", null, \"\\u4E4B\\u524D\\u7684API {#previous-api}\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\"\n  }, \"const countAtom = atom(0)\\n\\n  // \\u5728\\u7EC4\\u4EF6\\u4E2D\\n  <Provider initialValues={[[countAtom, 1]]}>\\n    ...\\n\")), mdx(\"h5\", null, \"\\u65B0 API {#new-api}\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\"\n  }, \"const countAtom = atom(0)\\n\\nconst HydrateAtoms = ({ initialValues, children }) => {\\n  useHydrateAtoms(initialValues)\\n  return children\\n}\\n\\n  // \\u5728\\u7EC4\\u4EF6\\u4E2D\\n  <Provider>\\n    <HydrateAtoms initialValues={[[countAtom, 1]]}>\\n      ...\\n\")), mdx(\"h4\", null, \"Provider\\u7684 \", mdx(\"inlineCode\", {\n    parentName: \"h4\"\n  }, \"scope\"), \" \\u5C5E\\u6027 {#provider's-\", mdx(\"inlineCode\", {\n    parentName: \"h4\"\n  }, \"scope\"), \"-prop}\"), mdx(\"h5\", null, \"\\u65E7 API {#previous-api}\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\"\n  }, \"const myScope = Symbol()\\n\\n  // \\u7236\\u7EC4\\u4EF6\\n  <Provider scope={myScope}>\\n    ...\\n  </Provider>\\n\\n  // \\u5B50\\u7EC4\\u4EF6\\n  useAtom(..., myScope)\\n\")), mdx(\"h5\", null, \"\\u65B0 API {#new-api}\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\"\n  }, \"const MyContext = createContext()\\nconst store = createStore()\\n\\n  // \\u7236\\u7EC4\\u4EF6\\n  <MyContext.Provider value={store}>\\n    ...\\n  </MyContext.Provider>\\n\\n  // \\u5B50\\u7EC4\\u4EF6\\n  const store = useContext(MyContext)\\n  useAtom(..., { store })\\n\")), mdx(\"h4\", null, mdx(\"inlineCode\", {\n    parentName: \"h4\"\n  }, \"abortableAtom\"), \" \\u5DE5\\u5177 {#\", mdx(\"inlineCode\", {\n    parentName: \"h4\"\n  }, \"abortableatom\"), \"-util}\"), mdx(\"p\", null, \"\\u4F60\\u4E0D\\u518D\\u9700\\u8981\\u4E4B\\u524D\\u7684 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"abortableAtom\"), \" \\u5DE5\\u5177\\uFF0C\\n\\u56E0\\u4E3A\\u73B0\\u5728\\u666E\\u901A\\u7684 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"atom\"), \" \\u5DF2\\u7ECF\\u652F\\u6301\\u4E86\\u3002\"), mdx(\"h5\", null, \"\\u65E7 API {#previous-api}\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"const asyncAtom = abortableAtom(async (get, { signal }) => {\\n ...\\n}\\n\")), mdx(\"h5\", null, \"\\u65B0 API {#new-api}\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"const asyncAtom = atom(async (get, { signal }) => {\\n  ...\\n}\\n\")), mdx(\"h4\", null, mdx(\"inlineCode\", {\n    parentName: \"h4\"\n  }, \"waitForAll\"), \" \\u5DE5\\u5177 {#\", mdx(\"inlineCode\", {\n    parentName: \"h4\"\n  }, \"waitforall\"), \"-util}\"), mdx(\"p\", null, \"\\u4F60\\u4E0D\\u518D\\u9700\\u8981\\u4E4B\\u524D\\u7684 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"waitForAll\"), \" \\u5DE5\\u5177\\uFF0C\\n\\u56E0\\u4E3A\\u6211\\u4EEC\\u53EF\\u4EE5\\u4F7F\\u7528\\u539F\\u751F\\u7684 Promise API\\u3002\"), mdx(\"h5\", null, \"\\u65E7 API {#previous-api}\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"const allAtom = waitForAll([fooAtom, barAtom])\\n\")), mdx(\"h5\", null, \"\\u65B0 API {#new-api}\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"const allAtom = atom((get) => Promise.all([get(fooAtom), get(barAtom)]))\\n\")), mdx(\"p\", null, \"\\u6CE8\\u610F\\uFF0C\\u5728\\u6E32\\u67D3\\u51FD\\u6570\\u4E2D\\u521B\\u5EFA atom \\u53EF\\u80FD\\u4F1A\\u5BFC\\u81F4\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"../api/atom.mdx#note-about-creating-an-atom-in-render-function\"\n  }, \"\\u65E0\\u9650\\u5FAA\\u73AF\")), mdx(\"h4\", null, mdx(\"inlineCode\", {\n    parentName: \"h4\"\n  }, \"splitAtom\"), \" \\u5DE5\\u5177\\uFF08\\u6216\\u5176\\u4ED6\\u4E00\\u4E9B\\u5DE5\\u5177\\uFF09\\u4E0E\\u5F02\\u6B65 atoms {#\", mdx(\"inlineCode\", {\n    parentName: \"h4\"\n  }, \"splitatom\"), \"-util-(or-some-other-utils)-with-async-atoms}\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"splitAtom\"), \" \\u5DE5\\u5177\\u53EA\\u63A5\\u53D7\\u540C\\u6B65\\u7684 atoms\\u3002\\n\\u4F60\\u9700\\u8981\\u5728\\u4F20\\u9012\\u4E4B\\u524D\\u89E3\\u5305\\u5F02\\u6B65 atoms\\u3002\"), mdx(\"p\", null, \"\\u8FD9\\u4E5F\\u9002\\u7528\\u4E8E\\u5176\\u4ED6\\u4E00\\u4E9B\\u5DE5\\u5177\\uFF0C\\u5982 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"jotai-tanstack-query\"), \" \\u7684 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"atomsWithQuery\"), \"\\u3002\"), mdx(\"h5\", null, \"\\u65E7 API {#previous-api}\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"const splittedAtom = splitAtom(asyncArrayAtom)\\n\")), mdx(\"h5\", null, \"\\u65B0 API {#new-api}\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"const splittedAtom = splitAtom(unwrap(asyncArrayAtom, () => []))\\n\")), mdx(\"p\", null, \"\\u5728\\u7F16\\u5199\\u65F6\\uFF0C\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"unwrap\"), \" \\u662F\\u4E0D\\u7A33\\u5B9A\\u7684\\uFF0C\\u4E14\\u672A\\u88AB\\u6587\\u6863\\u8BB0\\u5F55\\u3002\\n\\u4F60\\u53EF\\u4EE5\\u6539\\u7528 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"loadable\"), \"\\uFF0C\\u5B83\\u5728\\u52A0\\u8F7D\\u72B6\\u6001\\u4E0A\\u63D0\\u4F9B\\u4E86\\u66F4\\u591A\\u7684\\u63A7\\u5236\\u3002\\n\\u5982\\u679C\\u4F60\\u9700\\u8981\\u4F7F\\u7528 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<Suspense>\"), \"\\uFF0Catoms-in-atom \\u6A21\\u5F0F\\u4F1A\\u6709\\u6240\\u5E2E\\u52A9\\u3002\"), mdx(\"p\", null, \"\\u66F4\\u591A\\u4FE1\\u606F\\uFF0C\\u8BF7\\u53C2\\u8003\\u4EE5\\u4E0B\\u8BA8\\u8BBA\\uFF1A\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://github.com/pmndrs/jotai/discussions/1615\"\n  }, \"https://github.com/pmndrs/jotai/discussions/1615\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://github.com/jotaijs/jotai-tanstack-query/issues/21\"\n  }, \"https://github.com/jotaijs/jotai-tanstack-query/issues/21\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://github.com/pmndrs/jotai/discussions/1751\"\n  }, \"https://github.com/pmndrs/jotai/discussions/1751\"))), mdx(\"h3\", null, \"\\u5176\\u4ED6\\u4E00\\u4E9B\\u53D8\\u5316 {#some-other-changes}\"), mdx(\"h4\", null, \"\\u5DE5\\u5177 {#utils}\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"atomWithStorage\"), \" \\u5DE5\\u5177\\u7684 \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"delayInit\"), \" \\u5DF2\\u88AB\\u79FB\\u9664\\u5E76\\u9ED8\\u8BA4\\u542F\\u7528\\u3002\\u5B83\\u5C06\\u59CB\\u7EC8\\u5728\\u9996\\u6B21\\u6E32\\u67D3\\u65F6\\u6E32\\u67D3 \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"initialValue\"), \"\\uFF0C\\u5E76\\u5728\\u540E\\u7EED\\u6E32\\u67D3\\u65F6\\u6E32\\u67D3\\u5B58\\u50A8\\u7684\\u503C\\uFF08\\u5982\\u679C\\u6709\\uFF09\\u3002\\u65B0\\u7684\\u884C\\u4E3A\\u4E0E v1 \\u4E0D\\u540C\\u3002\\u66F4\\u591A\\u4FE1\\u606F\\u8BF7\\u53C2\\u89C1 \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://github.com/pmndrs/jotai/discussions/1737\"\n  }, \"https://github.com/pmndrs/jotai/discussions/1737\"), \" \\u3002\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"useHydrateAtoms\"), \" \\u53EA\\u80FD\\u63A5\\u53D7\\u53EF\\u5199\\u7684 atoms\\u3002\")), mdx(\"h4\", null, \"\\u5BFC\\u5165\\u58F0\\u660E {#import-statements}\"), mdx(\"p\", null, \"v2 API \\u4E5F\\u4E3A\\u5E93\\u4F5C\\u8005\\u548C\\u975E React \\u7528\\u6237\\u63D0\\u4F9B\\u4E86\\u4ECE\\u5176\\u4ED6\\u5165\\u53E3\\u70B9\\u5BFC\\u5165\\u7684\\u65B9\\u5F0F\\u3002\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"jotai/vanilla\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"jotai/vanilla/utils\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"jotai/react\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"jotai/react/utils\"))), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"// \\u81EA v1.11.0 \\u8D77\\u53EF\\u7528\\nimport { atom } from 'jotai/vanilla'\\nimport { useAtom } from 'jotai/react'\\n\\n// \\u81EA v2.0.0 \\u8D77\\u53EF\\u7528\\nimport { atom } from 'jotai' // \\u4E0E 'jotai/vanilla' \\u76F8\\u540C\\nimport { useAtom } from 'jotai' // \\u4E0E 'jotai/react' \\u76F8\\u540C\\n\")), mdx(\"p\", null, \"\\u6CE8\\u610F\\uFF1A\\u5982\\u679C\\u4F60\\u4E0D\\u4F7F\\u7528 ESM\\uFF0C\\u4F60\\u53EF\\u80FD\\u66F4\\u503E\\u5411\\u4E8E\\u4F7F\\u7528 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"jotai/vanilla\"), \" \\u7B49\\uFF0C\\u800C\\u4E0D\\u662F \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"jotai\"), \"\\uFF0C\\u4EE5\\u4FBF\\u66F4\\u597D\\u5730\\u8FDB\\u884C\\u6811\\u6447\\uFF08tree shaking\\uFF09\\u3002\"));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"id":"af0e3afa-806c-529b-adf0-62d8e6e13539","slug":"guides/migrating-to-v2-api","__params":{"slug":"guides"}}},"staticQueryHashes":["171421096","930225796"]}