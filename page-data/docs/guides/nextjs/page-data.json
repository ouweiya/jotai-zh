{"componentChunkName":"component---src-pages-docs-mdx-slug-js","path":"/docs/guides/nextjs","result":{"data":{"mdx":{"slug":"guides/nextjs","frontmatter":{"title":"Next.js","description":"How to use Jotai with Next.js"},"body":"const _excluded = [\"components\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nconst _frontmatter = {\n  \"title\": \"Next.js\",\n  \"description\": \"How to use Jotai with Next.js\",\n  \"nav\": 7.03,\n  \"keywords\": \"next,nextjs\"\n};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return mdx(\"div\", props);\n};\nconst CodeSandbox = makeShortcode(\"CodeSandbox\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  let {\n      components\n    } = _ref,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h3\", null, \"Hydration {#hydration}\"), mdx(\"p\", null, \"Jotai \\u652F\\u6301\\u4F7F\\u7528 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useHydrateAtoms\"), \" \\u8FDB\\u884C atoms \\u7684 hydration\\u3002\\u4F60\\u53EF\\u4EE5\\u5728\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"../utilities/ssr.mdx\"\n  }, \"\\u8FD9\\u91CC\"), \"\\u67E5\\u770B\\u8BE5 hook \\u7684\\u6587\\u6863\\u3002\"), mdx(\"h3\", null, \"\\u4E0E\\u8DEF\\u7531\\u540C\\u6B65 {#sync-with-router}\"), mdx(\"p\", null, \"\\u53EF\\u4EE5\\u5C06 Jotai \\u4E0E\\u8DEF\\u7531\\u540C\\u6B65\\u3002\\u4F60\\u53EF\\u4EE5\\u901A\\u8FC7 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"atomWithHash\"), \" \\u5B9E\\u73B0\\u8FD9\\u4E00\\u70B9\\uFF1A\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"const pageAtom = atomWithHash('page', 1, {\\n  replaceState: true,\\n  subscribe: (callback) => {\\n    Router.events.on('routeChangeComplete', callback)\\n    window.addEventListener('hashchange', callback)\\n    return () => {\\n      Router.events.off('routeChangeComplete', callback)\\n      window.removeEventListener('hashchange', callback)\\n    }\\n  },\\n})\\n\")), mdx(\"p\", null, \"\\u8FD9\\u6837\\uFF0C\\u4F60\\u5C31\\u53EF\\u4EE5\\u5B8C\\u5168\\u63A7\\u5236\\u4F60\\u60F3\\u8BA2\\u9605\\u7684\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://nextjs.org/docs/api-reference/next/router#routerevents\"\n  }, \"\\u8DEF\\u7531\\u4E8B\\u4EF6\"), \"\\u3002\"), mdx(\"blockquote\", null, mdx(\"h4\", {\n    parentName: \"blockquote\"\n  }, \"\\u5728 Next.js 13 \\u4E2D\"), mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u4ECE Next.js 13 \\u5F00\\u59CB\\uFF0C\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Router.events.on()\"), \" \\u5DF2\\u7ECF\\u53D1\\u751F\\u4E86\\u4E00\\u4E9B\\u53D8\\u5316\\uFF0C\\u4E0D\\u518D\\u66B4\\u9732\\u4E8B\\u4EF6\\u3002\\u5728 \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://beta.nextjs.org/docs/app-directory-roadmap#planned-features\"\n  }, \"App Router Roadmap\"), \" \\u4E2D\\u6709\\u5173\\u4E8E\\u4E8B\\u4EF6\\u62E6\\u622A\\u548C hash \\u5904\\u7406\\u7684\\u8BA1\\u5212\\u3002\\u4F46\\u662F\\uFF0C\\u76EE\\u524D\\u8FD8\\u6CA1\\u6709 ETA\\uFF0C\\u4E5F\\u4E0D\\u6E05\\u695A\\u5B83\\u4F1A\\u662F\\u4EC0\\u4E48\\u6837\\u5B50\\u3002\\u76EE\\u524D\\uFF0C\\u5F53\\u4F60\\u5C1D\\u8BD5\\u4F7F\\u7528 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"atomWithHash()\"), \" \\u65F6\\uFF0C\\u53EA\\u6709\\u5728\\u9875\\u9762\\u91CD\\u65B0\\u52A0\\u8F7D\\u6216\\u7EC4\\u4EF6\\u91CD\\u65B0\\u6E32\\u67D3\\u65F6\\uFF0C\\u4F60\\u624D\\u80FD\\u83B7\\u53D6\\u5230\\u5E26\\u6709\\u6570\\u636E\\u7684 atom\\uFF0C\\u800C\\u4E0D\\u662F\\u901A\\u8FC7\\u8DEF\\u7531\\u5BFC\\u822A\\u3002\\u5EFA\\u8BAE\\u4F60\\u5C06 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"setHash\"), \" \\u9009\\u9879\\u8BBE\\u7F6E\\u4E3A \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"replaceState\"), \"\\uFF0C\\u56E0\\u4E3A Next.js \\u4F3C\\u4E4E\\u5728\\u540E\\u53F0\\u4F7F\\u7528 window.history\\uFF0C\\u8FD9\\u5C06\\u5141\\u8BB8\\u7528\\u6237\\u4F7F\\u7528\\u6D4F\\u89C8\\u5668\\u7684\\u540E\\u9000\\u6309\\u94AE\\u3002\")), mdx(\"h3\", null, \"\\u4F60\\u4E0D\\u80FD\\u5728\\u670D\\u52A1\\u5668\\u7AEF\\u6E32\\u67D3\\u4E2D\\u8FD4\\u56DE promises {#you-can't-return-promises-in-server-side-rendering}\"), mdx(\"p\", null, \"\\u9700\\u8981\\u6CE8\\u610F\\u7684\\u662F\\uFF0C\\u4F60\\u4E0D\\u80FD\\u5728 SSR \\u4E2D\\u8FD4\\u56DE promises - \\u4F46\\u662F\\uFF0C\\u4F60\\u53EF\\u4EE5\\u5728 atom \\u5B9A\\u4E49\\u4E2D\\u9632\\u6B62\\u8FD9\\u79CD\\u60C5\\u51B5\\u3002\"), mdx(\"p\", null, \"\\u5982\\u679C\\u53EF\\u80FD\\u7684\\u8BDD\\uFF0C\\u4F7F\\u7528 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useHydrateAtoms\"), \" \\u6765\\u4ECE\\u670D\\u52A1\\u5668 hydrate \\u503C\\u3002\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"const postData = atom((get) => {\\n  const id = get(postId)\\n  if (isSSR || prefetchedPostData[id]) {\\n    return prefetchedPostData[id] || EMPTY_POST_DATA\\n  }\\n  return fetchData(id) // \\u8FD4\\u56DE\\u4E00\\u4E2A promise\\n})\\n\")), mdx(\"h3\", null, \"Provider {#provider}\"), mdx(\"p\", null, \"\\u9ED8\\u8BA4\\u60C5\\u51B5\\u4E0B\\uFF0CJotai \\u4F7F\\u7528\\u4E00\\u4E2A\\u9690\\u5F0F\\u7684\\u5168\\u5C40\\u5B58\\u50A8\\u6765\\u8DDF\\u8E2A atom \\u7684\\u503C\\u3002\\u8FD9\\u5C31\\u662F\\u6240\\u8C13\\u7684 \\\"\\u65E0 provider\\\" \\u6A21\\u5F0F\\u3002\\u5728 SSR \\u573A\\u666F\\u4E2D\\uFF0C\\u8FD9\\u6210\\u4E3A\\u4E00\\u4E2A\\u95EE\\u9898\\uFF0C\\u56E0\\u4E3A\\u8FD9\\u4E2A\\u5168\\u5C40\\u5B58\\u50A8\\u4FDD\\u6301\\u6D3B\\u8DC3\\uFF0C\\u5E76\\u5728\\u591A\\u4E2A\\u8BF7\\u6C42\\u4E4B\\u95F4\\u5171\\u4EAB\\uFF0C\\u8FD9\\u53EF\\u80FD\\u5BFC\\u81F4 bugs \\u548C\\u5B89\\u5168\\u98CE\\u9669\\u3002\"), mdx(\"p\", null, \"\\u4E3A\\u4E86\\u5C06\\u5B58\\u50A8\\u7684\\u751F\\u547D\\u5468\\u671F\\u9650\\u5236\\u5728\\u4E00\\u4E2A\\u8BF7\\u6C42\\u7684\\u8303\\u56F4\\u5185\\uFF0C\\u4F60\\u9700\\u8981\\u5728\\u4F60\\u7684\\u5E94\\u7528\\u7684\\u6839\\u90E8\\uFF08\\u6216\\u8005\\u5982\\u679C\\u4F60\\u53EA\\u5728\\u5E94\\u7528\\u7684\\u4E00\\u90E8\\u5206\\u4F7F\\u7528 Jotai\\uFF0C\\u90A3\\u5C31\\u662F\\u90A3\\u90E8\\u5206\\u7684\\u5B50\\u6811\\uFF09\\u4F7F\\u7528 \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"../core/provider.mdx\"\n  }, \"Provider\"), \"\\u3002\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-typescript\"\n  }, \"import { Provider } from 'jotai'\\n\\nfunction App({ Component, pageProps }: AppProps) {\\n  return (\\n    <Provider>\\n      <Component {...pageProps} />\\n    </Provider>\\n  )\\n}\\n\")), mdx(\"p\", null, \"\\u5728\\u8FD9\\u79CD\\u60C5\\u51B5\\u4E0B\\uFF1A\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Provider\"), \" \\u5C06\\u6301\\u6709\\u5176\\u5B50\\u6811\\u4E2D\\u4F7F\\u7528\\u7684 atoms \\u7684\\u72B6\\u6001\\uFF0C\\u800C\\u4E0D\\u662F\\u5168\\u5C40\\u5B58\\u50A8\\u3002\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Provider\"), \" \\u7684\\u751F\\u547D\\u5468\\u671F\\u5C06\\u4E0E\\u5E94\\u7528\\u672C\\u8EAB\\u76F8\\u540C\\uFF0C\\u800C\\u7531\\u4E8E\\u5E94\\u7528\\u5728\\u6BCF\\u4E2A SSR \\u8BF7\\u6C42\\u4E0A\\u90FD\\u4F1A\\u88AB\\u91CD\\u65B0\\u521B\\u5EFA\\uFF0C\\u6211\\u4EEC\\u5B9E\\u9645\\u4E0A\\u5C06\\u5B58\\u50A8\\u7684\\u751F\\u547D\\u5468\\u671F\\u9650\\u5236\\u5728\\u4E86\\u4E00\\u4E2A\\u8BF7\\u6C42\\u5185\\u3002\")), mdx(\"h3\", null, \"SWC \\u63D2\\u4EF6 {#swc-plugins}\"), mdx(\"p\", null, \"Jotai \\u63D0\\u4F9B\\u4E86 SWC \\u63D2\\u4EF6\\uFF0C\\u4EE5\\u4FBF\\u5728\\u4F7F\\u7528 Next.js \\u5F00\\u53D1\\u65F6\\u83B7\\u5F97\\u66F4\\u597D\\u7684 DX\\u3002\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"../tools/swc.mdx\"\n  }, \"\\u5728 SWC \\u90E8\\u5206\\u627E\\u5230\\u66F4\\u591A\\u4FE1\\u606F\\u3002\")), mdx(\"h3\", null, \"\\u793A\\u4F8B {#examples}\"), mdx(\"h4\", null, \"\\u65F6\\u949F {#clock}\"), mdx(CodeSandbox, {\n    id: \"snu7n\",\n    mdxType: \"CodeSandbox\"\n  }), mdx(\"h4\", null, \"HN \\u6587\\u7AE0 {#hn-posts}\"), mdx(CodeSandbox, {\n    id: \"819n4\",\n    mdxType: \"CodeSandbox\"\n  }), mdx(\"h4\", null, \"Next.js \\u4ED3\\u5E93 {#next.js-repo}\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"npx create-next-app --example with-jotai with-jotai-app\\n\")), mdx(\"p\", null, \"\\u8FD9\\u662F\\u4E00\\u4E2A\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/vercel/next.js/tree/canary/examples/with-jotai\"\n  }, \"\\u94FE\\u63A5\"), \"\\u3002\"));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"id":"94fca3c0-86d8-5f51-990a-e07c07f34e43","slug":"guides/nextjs","__params":{"slug":"guides"}}},"staticQueryHashes":["171421096","930225796"]}