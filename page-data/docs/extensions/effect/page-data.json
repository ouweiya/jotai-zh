{"componentChunkName":"component---src-pages-docs-mdx-slug-js","path":"/docs/extensions/effect","result":{"data":{"mdx":{"slug":"extensions/effect","frontmatter":{"title":"Effect","description":"A Jōtai utility package for reactive side effects"},"body":"const _excluded = [\"components\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nconst _frontmatter = {\n  \"title\": \"Effect\",\n  \"description\": \"A Jōtai utility package for reactive side effects\",\n  \"nav\": 4.03,\n  \"keywords\": \"effect, atom effect, side effect, side-effect, sideeffect\"\n};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return mdx(\"div\", props);\n};\nconst CodeSandbox = makeShortcode(\"CodeSandbox\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  let {\n      components\n    } = _ref,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/jotaijs/jotai-effect\"\n  }, \"jotai-effect\"), \" \\u662F\\u4E00\\u4E2A\\u7528\\u4E8E\\u54CD\\u5E94\\u5F0F\\u526F\\u4F5C\\u7528\\u7684\\u5B9E\\u7528\\u7A0B\\u5E8F\\u5305\\u3002\"), mdx(\"h2\", null, \"\\u5B89\\u88C5 {#install}\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"npm i jotai-effect\\n\")), mdx(\"h2\", null, \"atomEffect {#atomeffect}\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"atomEffect\"), \" \\u662F\\u4E00\\u4E2A\\u7528\\u4E8E\\u58F0\\u660E\\u526F\\u4F5C\\u7528\\u548C\\u540C\\u6B65 Jotai \\u539F\\u5B50\\u7684\\u5B9E\\u7528\\u51FD\\u6570\\u3002\\u5B83\\u5BF9\\u4E8E\\u89C2\\u5BDF\\u548C\\u54CD\\u5E94\\u72B6\\u6001\\u53D8\\u5316\\u975E\\u5E38\\u6709\\u7528\\u3002\"), mdx(\"h2\", null, \"\\u53C2\\u6570 {#parameters}\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-ts\"\n  }, \"type CleanupFn = () => void\\n\\ntype EffectFn = (\\n  get: Getter & { peek: Getter },\\n  set: Setter & { recurse: Setter },\\n) => CleanupFn | void\\n\\ndeclare function atomEffect(effectFn: EffectFn): Atom<void>\\n\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"effectFn\"), \" (\\u5FC5\\u9700): \\u4E00\\u4E2A\\u7528\\u4E8E\\u901A\\u8FC7 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"get\"), \" \\u76D1\\u542C\\u72B6\\u6001\\u66F4\\u65B0\\u548C\\u901A\\u8FC7 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"set\"), \" \\u5199\\u5165\\u72B6\\u6001\\u66F4\\u65B0\\u7684\\u51FD\\u6570\\u3002\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"effectFn\"), \" \\u5BF9\\u4E8E\\u521B\\u5EFA\\u4E0E\\u5176\\u4ED6 Jotai \\u539F\\u5B50\\u4EA4\\u4E92\\u7684\\u526F\\u4F5C\\u7528\\u975E\\u5E38\\u6709\\u7528\\u3002\\u60A8\\u53EF\\u4EE5\\u901A\\u8FC7\\u8FD4\\u56DE\\u4E00\\u4E2A\\u6E05\\u7406\\u51FD\\u6570\\u6765\\u6E05\\u7406\\u8FD9\\u4E9B\\u526F\\u4F5C\\u7528\\u3002\"), mdx(\"h2\", null, \"\\u4F7F\\u7528 {#usage}\"), mdx(\"p\", null, \"\\u8BA2\\u9605\\u539F\\u5B50\\u53D8\\u5316\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"import { atomEffect } from 'jotai-effect'\\n\\nconst loggingEffect = atomEffect((get, set) => {\\n  // \\u5728\\u6302\\u8F7D\\u6216\\u67D0\\u4E2A\\u539F\\u5B50\\u53D1\\u751F\\u53D8\\u5316\\u65F6\\u8FD0\\u884C\\n  const value = get(someAtom)\\n  loggingService.setValue(value)\\n})\\n\")), mdx(\"p\", null, \"\\u8BBE\\u7F6E\\u548C\\u62C6\\u89E3\\u526F\\u4F5C\\u7528\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"import { atomEffect } from 'jotai-effect'\\n\\nconst subscriptionEffect = atomEffect((get, set) => {\\n  const unsubscribe = subscribe((value) => {\\n    set(valueAtom, value)\\n  })\\n  return unsubscribe\\n})\\n\")), mdx(\"h2\", null, \"\\u4F7F\\u7528\\u539F\\u5B50\\u6216\\u94A9\\u5B50\\u6302\\u8F7D {#mounting-with-atoms-or-hooks}\"), mdx(\"p\", null, \"\\u5728\\u4F7F\\u7528 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"atomEffect\"), \" \\u5B9A\\u4E49\\u4E86\\u4E00\\u4E2A\\u6548\\u679C\\u540E\\uFF0C\\u5B83\\u53EF\\u4EE5\\u88AB\\u96C6\\u6210\\u5230\\u53E6\\u4E00\\u4E2A\\u539F\\u5B50\\u7684\\u8BFB\\u53D6\\u51FD\\u6570\\u4E2D\\uFF0C\\u6216\\u8005\\u4F20\\u9012\\u7ED9 Jotai \\u94A9\\u5B50\\u3002\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"const anAtom = atom((get) => {\\n  // \\u5F53 anAtom \\u6302\\u8F7D\\u65F6\\uFF0C\\u6302\\u8F7D atomEffect\\n  get(loggingEffect)\\n  // ...\\n})\\n\\n// \\u5F53\\u7EC4\\u4EF6\\u6302\\u8F7D\\u65F6\\uFF0C\\u6302\\u8F7D atomEffect\\nfunction MyComponent() {\\n  useAtom(subscriptionEffect)\\n  // ...\\n}\\n\")), mdx(CodeSandbox, {\n    id: \"tg9xsf\",\n    mdxType: \"CodeSandbox\"\n  }), mdx(\"h2\", null, mdx(\"inlineCode\", {\n    parentName: \"h2\"\n  }, \"atomEffect\"), \" \\u7684\\u884C\\u4E3A {#the-\", mdx(\"inlineCode\", {\n    parentName: \"h2\"\n  }, \"atomeffect\"), \"-behavior}\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u6E05\\u7406\\u51FD\\u6570:\"), \"\\n\\u5728\\u5378\\u8F7D\\u6216\\u91CD\\u65B0\\u8BC4\\u4F30\\u4E4B\\u524D\\uFF0C\\u4F1A\\u8C03\\u7528\\u6E05\\u7406\\u51FD\\u6570\\u3002\"), mdx(\"details\", {\n    style: {\n      \"cursor\": \"pointer\",\n      \"userSelect\": \"none\"\n    }\n  }, mdx(\"summary\", null, \"\\u793A\\u4F8B\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"atomEffect((get, set) => {\\n  const intervalId = setInterval(() => set(clockAtom, Date.now()))\\n  return () => clearInterval(intervalId)\\n})\\n\")))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u62B5\\u6297\\u65E0\\u9650\\u5FAA\\u73AF:\"), \"\\n\\u5F53 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"atomEffect\"), \" \\u901A\\u8FC7 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"set\"), \" \\u6539\\u53D8\\u5B83\\u6B63\\u5728\\u89C2\\u5BDF\\u7684\\u503C\\u65F6\\uFF0C\\u4E0D\\u4F1A\\u91CD\\u65B0\\u8FD0\\u884C\\u3002\"), mdx(\"details\", {\n    style: {\n      \"cursor\": \"pointer\",\n      \"userSelect\": \"none\"\n    }\n  }, mdx(\"summary\", null, \"\\u793A\\u4F8B\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"const countAtom = atom(0)\\natomEffect((get, set) => {\\n  // \\u8FD9\\u4E0D\\u4F1A\\u65E0\\u9650\\u5FAA\\u73AF\\n  get(countAtom) // \\u5728\\u6302\\u8F7D\\u540E\\uFF0C\\u8BA1\\u6570\\u5C06\\u4E3A 1\\n  set(countAtom, increment)\\n})\\n\")))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u652F\\u6301\\u9012\\u5F52:\"), \"\\n\\u5BF9\\u4E8E\\u540C\\u6B65\\u548C\\u5F02\\u6B65\\u7684\\u4F7F\\u7528\\u573A\\u666F\\uFF0C\\u90FD\\u652F\\u6301\\u4F7F\\u7528 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"set.recurse\"), \" \\u8FDB\\u884C\\u9012\\u5F52\\uFF0C\\u4F46\\u5728\\u6E05\\u7406\\u51FD\\u6570\\u4E2D\\u4E0D\\u652F\\u6301\\u3002\"), mdx(\"details\", {\n    style: {\n      \"cursor\": \"pointer\",\n      \"userSelect\": \"none\"\n    }\n  }, mdx(\"summary\", null, \"\\u793A\\u4F8B\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"const countAtom = atom(0)\\natomEffect((get, set) => {\\n  // \\u6BCF\\u79D2\\u589E\\u52A0\\u4E00\\u6B21\\u8BA1\\u6570\\n  const count = get(countAtom)\\n  const timeoutId = setTimeout(() => {\\n    set.recurse(countAtom, increment)\\n  }, 1000)\\n  return () => clearTimeout(timeoutId)\\n})\\n\")))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u652F\\u6301 Peek:\"), \"\\n\\u4F7F\\u7528 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"get.peek\"), \" \\u8BFB\\u53D6\\u539F\\u5B50\\u6570\\u636E\\uFF0C\\u800C\\u4E0D\\u8BA2\\u9605\\u66F4\\u6539\\u3002\"), mdx(\"details\", {\n    style: {\n      \"cursor\": \"pointer\",\n      \"userSelect\": \"none\"\n    }\n  }, mdx(\"summary\", null, \"\\u793A\\u4F8B\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"const countAtom = atom(0)\\natomEffect((get, set) => {\\n  // \\u5F53 countAtom \\u53D1\\u751F\\u53D8\\u5316\\u65F6\\uFF0C\\u4E0D\\u4F1A\\u91CD\\u65B0\\u8FD0\\u884C\\n  const count = get.peek(countAtom)\\n})\\n\")))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u5728\\u4E0B\\u4E00\\u4E2A\\u5FAE\\u4EFB\\u52A1\\u4E2D\\u6267\\u884C:\"), \"\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"effectFn\"), \" \\u5728\\u4E0B\\u4E00\\u4E2A\\u53EF\\u7528\\u7684\\u5FAE\\u4EFB\\u52A1\\u4E2D\\u8FD0\\u884C\\uFF0C\\u6240\\u6709 Jotai \\u7684\\u540C\\u6B65\\u8BFB\\u53D6\\u8BC4\\u4F30\\u5B8C\\u6210\\u540E\\u3002\"), mdx(\"details\", {\n    style: {\n      \"cursor\": \"pointer\",\n      \"userSelect\": \"none\"\n    }\n  }, mdx(\"summary\", null, \"\\u793A\\u4F8B\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"const countAtom = atom(0)\\nconst logAtom = atom([])\\nconst logCounts = atomEffect((get, set) => {\\n  set(logAtom, (curr) => [...curr, get(countAtom)])\\n})\\nconst setCountAndReadLog = atom(null, async (get, set) => {\\n  get(logAtom) // [0]\\n  set(countAtom, increment) // \\u6548\\u679C\\u5728\\u4E0B\\u4E00\\u4E2A\\u5FAE\\u4EFB\\u52A1\\u4E2D\\u8FD0\\u884C\\n  get(logAtom) // [0]\\n  await Promise.resolve().then()\\n  get(logAtom) // [0, 1]\\n})\\nstore.set(setCountAndReadLog)\\n\")))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u6279\\u91CF\\u540C\\u6B65\\u66F4\\u65B0 (\\u539F\\u5B50\\u4E8B\\u52A1):\"), \"\\n\\u5BF9 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"atomEffect\"), \" \\u539F\\u5B50\\u4F9D\\u8D56\\u7684\\u591A\\u4E2A\\u540C\\u6B65\\u66F4\\u65B0\\u88AB\\u6279\\u91CF\\u5904\\u7406\\u3002\\u6548\\u679C\\u662F\\u4EE5\\u6700\\u7EC8\\u503C\\u4F5C\\u4E3A\\u5355\\u4E2A\\u539F\\u5B50\\u4E8B\\u52A1\\u8FD0\\u884C\\u3002\"), mdx(\"details\", {\n    style: {\n      \"cursor\": \"pointer\",\n      \"userSelect\": \"none\"\n    }\n  }, mdx(\"summary\", null, \"Example\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"const enabledAtom = atom(false)\\nconst countAtom = atom(0)\\nconst updateEnabledAndCount = atom(null, (get, set) => {\\n  set(enabledAtom, (value) => !value)\\n  set(countAtom, (value) => value + 1)\\n})\\nconst combos = atom([])\\nconst combosEffect = atomEffect((get, set) => {\\n  set(combos, (arr) => [...arr, [get(enabledAtom), get(countAtom)]])\\n})\\nstore.set(updateEnabledAndCount)\\nstore.get(combos) // [[false, 0], [true, 1]]\\n\")))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u6709\\u6761\\u4EF6\\u5730\\u8FD0\\u884C atomEffect\\uFF1A\"), \"\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"atomEffect\"), \" \\u53EA\\u5728\\u5176\\u5728\\u5E94\\u7528\\u7A0B\\u5E8F\\u4E2D\\u88AB\\u6302\\u8F7D\\u65F6\\u624D\\u5904\\u4E8E\\u6D3B\\u52A8\\u72B6\\u6001\\u3002\\u8FD9\\u53EF\\u4EE5\\u9632\\u6B62\\u5728\\u4E0D\\u9700\\u8981\\u65F6\\u8FDB\\u884C\\u4E0D\\u5FC5\\u8981\\u7684\\u8BA1\\u7B97\\u548C\\u526F\\u4F5C\\u7528\\u3002\\u4F60\\u53EF\\u4EE5\\u901A\\u8FC7\\u5378\\u8F7D\\u5B83\\u6765\\u7981\\u7528\\u6548\\u679C\\u3002\"), mdx(\"details\", {\n    style: {\n      \"cursor\": \"pointer\",\n      \"userSelect\": \"none\"\n    }\n  }, mdx(\"summary\", null, \"\\u793A\\u4F8B\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"atom((get) => {\\n  if (get(isEnabledAtom)) {\\n    get(effectAtom)\\n  }\\n})\\n\")))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u5E42\\u7B49\\u6027\\uFF1A\"), \"\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"atomEffect\"), \" \\u5728\\u72B6\\u6001\\u6539\\u53D8\\u65F6\\u53EA\\u8FD0\\u884C\\u4E00\\u6B21\\uFF0C\\u65E0\\u8BBA\\u5B83\\u88AB\\u6302\\u8F7D\\u4E86\\u591A\\u5C11\\u6B21\\u3002\"), mdx(\"details\", {\n    style: {\n      \"cursor\": \"pointer\",\n      \"userSelect\": \"none\"\n    }\n  }, mdx(\"summary\", null, \"\\u793A\\u4F8B\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"let i = 0\\nconst effectAtom = atomEffect(() => {\\n  get(countAtom)\\n  i++\\n})\\nconst mountTwice = atom(() => {\\n  get(effectAtom)\\n  get(effectAtom)\\n})\\nstore.set(countAtom, increment)\\nPromise.resolve.then(() => {\\n  console.log(i) // 1\\n})\\n\"))))), mdx(\"h3\", null, \"\\u4F9D\\u8D56\\u7BA1\\u7406 {#dependency-management}\"), mdx(\"p\", null, \"\\u9664\\u4E86\\u6302\\u8F7D\\u4E8B\\u4EF6\\u5916\\uFF0C\\u5F53\\u4EFB\\u4F55\\u4F9D\\u8D56\\u9879\\u7684\\u503C\\u6539\\u53D8\\u65F6\\uFF0C\\u6548\\u679C\\u4E5F\\u4F1A\\u8FD0\\u884C\\u3002\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u540C\\u6B65\\uFF1A\"), \"\\n\\u5728\\u6548\\u679C\\u7684\\u540C\\u6B65\\u8BC4\\u4F30\\u671F\\u95F4\\uFF0C\\u4F7F\\u7528 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"get\"), \" \\u8BBF\\u95EE\\u7684\\u6240\\u6709\\u539F\\u5B50\\u90FD\\u4F1A\\u88AB\\u6DFB\\u52A0\\u5230\\u539F\\u5B50\\u7684\\u5185\\u90E8\\u4F9D\\u8D56\\u56FE\\u4E2D\\u3002\"), mdx(\"details\", {\n    style: {\n      \"cursor\": \"pointer\",\n      \"userSelect\": \"none\"\n    }\n  }, mdx(\"summary\", null, \"\\u793A\\u4F8B\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"atomEffect((get, set) => {\\n  // \\u5F53 `anAtom` \\u7684\\u503C\\u6539\\u53D8\\u65F6\\u66F4\\u65B0\\uFF0C\\u4F46\\u5F53 `anotherAtom` \\u7684\\u503C\\u6539\\u53D8\\u65F6\\u4E0D\\u66F4\\u65B0\\n  get(anAtom)\\n  setTimeout(() => {\\n    get(anotherAtom)\\n  }, 5000)\\n})\\n\")))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u5F02\\u6B65\\uFF1A\"), \"\\n\\u5BF9\\u4E8E\\u5F02\\u6B65\\u6548\\u679C\\uFF0C\\u4F60\\u5E94\\u8BE5\\u4F7F\\u7528\\u4E00\\u4E2A\\u4E2D\\u6B62\\u63A7\\u5236\\u5668\\u6765\\u53D6\\u6D88\\u5F85\\u5904\\u7406\\u7684\\u83B7\\u53D6\\u8BF7\\u6C42\\u548C\\u627F\\u8BFA\\u3002\"), mdx(\"details\", {\n    style: {\n      \"cursor\": \"pointer\",\n      \"userSelect\": \"none\"\n    }\n  }, mdx(\"summary\", null, \"\\u793A\\u4F8B\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"atomEffect((get, set) => {\\n  const count = get(countAtom) // countAtom \\u662F\\u4E00\\u4E2A\\u539F\\u5B50\\u4F9D\\u8D56\\n  const abortController = new AbortController()\\n  ;(async () => {\\n    try {\\n      await delay(1000)\\n      abortController.signal.throwIfAborted()\\n      get(dataAtom) // dataAtom \\u4E0D\\u662F\\u4E00\\u4E2A\\u539F\\u5B50\\u4F9D\\u8D56\\n    } catch (e) {\\n      if (e instanceof AbortError) {\\n        // \\u8FD9\\u91CC\\u662F\\u5F02\\u6B65\\u6E05\\u7406\\u903B\\u8F91\\n      } else {\\n        console.error(e)\\n      }\\n    }\\n  })()\\n  return () => {\\n    // \\u5F53 countAtom \\u6539\\u53D8\\u65F6\\u4E2D\\u6B62\\n    abortController.abort(new AbortError())\\n  }\\n})\\n\")))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u6E05\\u7406\\uFF1A\"), \"\\n\\u5728\\u6E05\\u7406\\u51FD\\u6570\\u4E2D\\u4F7F\\u7528 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"get\"), \" \\u8BBF\\u95EE\\u539F\\u5B50\\u4E0D\\u4F1A\\u5C06\\u5B83\\u4EEC\\u6DFB\\u52A0\\u5230\\u539F\\u5B50\\u7684\\u5185\\u90E8\\u4F9D\\u8D56\\u56FE\\u4E2D\\u3002\"), mdx(\"details\", {\n    style: {\n      \"cursor\": \"pointer\",\n      \"userSelect\": \"none\"\n    }\n  }, mdx(\"summary\", null, \"\\u793A\\u4F8B\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"atomEffect((get, set) => {\\n  // \\u5728\\u6302\\u8F7D\\u65F6\\u8FD0\\u884C\\u4E00\\u6B21\\n  // \\u5F53 `idAtom` \\u6539\\u53D8\\u65F6\\u4E0D\\u66F4\\u65B0\\n  const unsubscribe = subscribe((valueAtom) => {\\n    const value = get(valueAtom)\\n    // ...\\n  })\\n  return () => {\\n    const id = get(idAtom)\\n    unsubscribe(id)\\n  }\\n})\\n\")))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u4F9D\\u8D56\\u56FE\\u7684\\u91CD\\u65B0\\u8BA1\\u7B97\\uFF1A\"), \"\\n\\u6BCF\\u6B21\\u8FD0\\u884C\\u65F6\\u90FD\\u4F1A\\u91CD\\u65B0\\u8BA1\\u7B97\\u4F9D\\u8D56\\u56FE\\u3002\\u5982\\u679C\\u5728\\u5F53\\u524D\\u8FD0\\u884C\\u671F\\u95F4\\u6CA1\\u6709\\u76D1\\u89C6\\u67D0\\u4E2A\\u539F\\u5B50\\uFF0C\\u90A3\\u4E48\\u5B83\\u5C06\\u4E0D\\u4F1A\\u5728\\u5F53\\u524D\\u8FD0\\u884C\\u7684\\u4F9D\\u8D56\\u56FE\\u4E2D\\u3002\\u53EA\\u6709\\u88AB\\u79EF\\u6781\\u76D1\\u89C6\\u7684\\u539F\\u5B50\\u624D\\u88AB\\u89C6\\u4E3A\\u4F9D\\u8D56\\u9879\\u3002\"), mdx(\"details\", {\n    style: {\n      \"cursor\": \"pointer\",\n      \"userSelect\": \"none\"\n    }\n  }, mdx(\"summary\", null, \"\\u793A\\u4F8B\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"const isEnabledAtom = atom(true)\\n\\natomEffect((get, set) => {\\n  // \\u5982\\u679C `isEnabledAtom` \\u4E3A\\u771F\\uFF0C\\u5F53 `isEnabledAtom` \\u6216 `anAtom` \\u7684\\u503C\\u6539\\u53D8\\u65F6\\u8FD0\\u884C\\n  // \\u5426\\u5219\\uFF0C\\u5F53 `isEnabledAtom` \\u6216 `anotherAtom` \\u7684\\u503C\\u6539\\u53D8\\u65F6\\u8FD0\\u884C\\n  if (get(isEnabledAtom)) {\\n    const aValue = get(anAtom)\\n  } else {\\n    const anotherValue = get(anotherAtom)\\n  }\\n})\\n\"))))), mdx(\"h3\", null, \"\\u4E0E useEffect \\u7684\\u6BD4\\u8F83 {#comparison-with-useeffect}\"), mdx(\"h4\", null, \"\\u7EC4\\u4EF6\\u526F\\u4F5C\\u7528 {#component-side-effects}\"), mdx(\"p\", null, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://react.dev/reference/react/useEffect\"\n  }, \"useEffect\"), \" \\u662F\\u4E00\\u4E2A React Hook\\uFF0C\\u5B83\\u8BA9\\u4F60\\u53EF\\u4EE5\\u5C06\\u7EC4\\u4EF6\\u4E0E\\u5916\\u90E8\\u7CFB\\u7EDF\\u540C\\u6B65\\u3002\"), mdx(\"p\", null, \"Hooks \\u662F\\u4E00\\u79CD\\u51FD\\u6570\\uFF0C\\u8BA9\\u4F60\\u53EF\\u4EE5\\u4ECE\\u51FD\\u6570\\u7EC4\\u4EF6\\u4E2D\\u201C\\u94A9\\u5165\\u201D React \\u7684\\u72B6\\u6001\\u548C\\u751F\\u547D\\u5468\\u671F\\u7279\\u6027\\u3002\\n\\u5B83\\u4EEC\\u662F\\u4E00\\u79CD\\u590D\\u7528\\uFF0C\\u4F46\\u4E0D\\u96C6\\u4E2D\\uFF0C\\u6709\\u72B6\\u6001\\u7684\\u903B\\u8F91\\u3002\\n\\u6BCF\\u6B21\\u8C03\\u7528 hook \\u90FD\\u6709\\u4E00\\u4E2A\\u5B8C\\u5168\\u72EC\\u7ACB\\u7684\\u72B6\\u6001\\u3002\\n\\u8FD9\\u79CD\\u9694\\u79BB\\u53EF\\u4EE5\\u88AB\\u79F0\\u4E3A \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"\\u7EC4\\u4EF6\\u8303\\u56F4\\u7684\"), \"\\u3002\\n\\u5BF9\\u4E8E\\u5C06\\u7EC4\\u4EF6 props \\u548C\\u72B6\\u6001\\u4E0E Jotai \\u539F\\u5B50\\u540C\\u6B65\\uFF0C\\u4F60\\u5E94\\u8BE5\\u4F7F\\u7528 useEffect hook\\u3002\"), mdx(\"h4\", null, \"\\u5168\\u5C40\\u526F\\u4F5C\\u7528 {#global-side-effects}\"), mdx(\"p\", null, \"\\u5BF9\\u4E8E\\u8BBE\\u7F6E\\u5168\\u5C40\\u526F\\u4F5C\\u7528\\uFF0C\\u9009\\u62E9 useEffect \\u548C atomEffect \\u53D6\\u51B3\\u4E8E\\u5F00\\u53D1\\u8005\\u7684\\u504F\\u597D\\u3002\\n\\u4F60\\u662F\\u66F4\\u559C\\u6B22\\u76F4\\u63A5\\u5728\\u7EC4\\u4EF6\\u4E2D\\u6784\\u5EFA\\u8FD9\\u4E2A\\u903B\\u8F91\\uFF0C\\u8FD8\\u662F\\u5728 Jotai \\u72B6\\u6001\\u6A21\\u578B\\u4E2D\\u6784\\u5EFA\\u8FD9\\u4E2A\\u903B\\u8F91\\uFF0C\\u53D6\\u51B3\\u4E8E\\u4F60\\u91C7\\u7528\\u7684\\u601D\\u7EF4\\u6A21\\u578B\\u3002\"), mdx(\"p\", null, \"atomEffects \\u66F4\\u9002\\u5408\\u5728\\u539F\\u5B50\\u4E2D\\u5EFA\\u6A21\\u884C\\u4E3A\\u3002\\n\\u5B83\\u4EEC\\u7684\\u8303\\u56F4\\u662F\\u5B58\\u50A8\\u4E0A\\u4E0B\\u6587\\uFF0C\\u800C\\u4E0D\\u662F\\u7EC4\\u4EF6\\u3002\\n\\u8FD9\\u4FDD\\u8BC1\\u4E86\\u65E0\\u8BBA\\u6709\\u591A\\u5C11\\u6B21\\u8C03\\u7528\\uFF0C\\u90FD\\u53EA\\u4F1A\\u4F7F\\u7528\\u4E00\\u4E2A\\u6548\\u679C\\u3002\"), mdx(\"p\", null, \"\\u5982\\u679C\\u4F60\\u786E\\u4FDD useEffect \\u662F\\u5E42\\u7B49\\u7684\\uFF0C\\u90A3\\u4E48\\u4E5F\\u53EF\\u4EE5\\u901A\\u8FC7 useEffect hook \\u5B9E\\u73B0\\u540C\\u6837\\u7684\\u4FDD\\u8BC1\\u3002\"), mdx(\"p\", null, \"atomEffects \\u4E0E useEffect \\u7684\\u533A\\u522B\\u8FD8\\u5728\\u4E8E\\u5176\\u4ED6\\u51E0\\u4E2A\\u65B9\\u9762\\u3002\\u5B83\\u4EEC\\u53EF\\u4EE5\\u76F4\\u63A5\\u5BF9\\u539F\\u5B50\\u72B6\\u6001\\u7684\\u6539\\u53D8\\u505A\\u51FA\\u53CD\\u5E94\\uFF0C\\u5BF9\\u65E0\\u9650\\u5FAA\\u73AF\\u6709\\u62B5\\u6297\\u529B\\uFF0C\\u5E76\\u4E14\\u53EF\\u4EE5\\u6709\\u6761\\u4EF6\\u5730\\u6302\\u8F7D\\u3002\"), mdx(\"h4\", null, \"\\u7531\\u4F60\\u51B3\\u5B9A {#it's-up-to-you}\"), mdx(\"p\", null, \"useEffect \\u548C atomEffect \\u90FD\\u6709\\u81EA\\u5DF1\\u7684\\u4F18\\u70B9\\u548C\\u5E94\\u7528\\u3002\\u4F60\\u7684\\u9879\\u76EE\\u7684\\u5177\\u4F53\\u9700\\u6C42\\u548C\\u4F60\\u7684\\u8212\\u9002\\u7A0B\\u5EA6\\u5E94\\u8BE5\\u6307\\u5BFC\\u4F60\\u7684\\u9009\\u62E9\\u3002\\n\\u603B\\u662F\\u503E\\u5411\\u4E8E\\u90A3\\u79CD\\u7ED9\\u4F60\\u66F4\\u987A\\u7545\\u3001\\u66F4\\u76F4\\u89C2\\u7684\\u5F00\\u53D1\\u4F53\\u9A8C\\u7684\\u65B9\\u6CD5\\u3002\\u795D\\u4F60\\u7F16\\u7A0B\\u6109\\u5FEB\\uFF01\"));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"id":"8223c0cb-0918-518d-ad59-dae373fdc5ed","slug":"extensions/effect","__params":{"slug":"extensions"}}},"staticQueryHashes":["171421096","930225796"]}